# Cheshire with Tracing System

Cheshire is a minimal Linux-capable host platform built around the RISC-V [CVA6](https://github.com/openhwgroup/cva6) core. Its goal is to provide a *lightweight*, *configurable*, *autonomously booting* host to systems that need one, from minimal Linux-capable SoCs to manycore compute accelerators.

Cheshire is developed as part of the PULP project, a joint effort between ETH Zurich and the University of Bologna.

The Tracing System includes: the [Trace Encoder](TODO) (TE), [Trace Input Port](TODO) (TIP), the [Encapsulator](TODO). The whole system is compliant with the [RISC-V Efficient Trace Specification v.2.0.2](TODO).
The repos are also available inside the PULP Platform GitHub repository.

## Quick Start

To run a simulation you need GCC version 11.2.0 or higher, otherwise the simulation will not complete.

Here the steps in order to run the simulation:
1. Move inside the downloaded directory
```
cd cheshire_tracing_system
```

2. Source the bash file to add the RISC-V compiler to the PATH
```
source setup.sh
```

3. Create and activate a Python virtual environment
```
python3 -m venv .venv
source .venv/bin/activate
```

4. Install the Python module required
```
pip install -r requirements.txt
```

5. Run the make
```
make all
```

6. Open QuestaSim
```
cd target/sim/vsim
questa-2022.3 vsim &
```

7. Run commands inside QuestaSim terminal
```
set BINARY ../../../sw/tests/helloworld.spm.elf
source compile.cheshire_soc.tcl
source start.cheshire_soc.tcl
log -r /*
run -all
```

## License

Unless specified otherwise in the respective file headers, all code checked into this repository is made available under a permissive license. All hardware sources and tool scripts are licensed under the Solderpad Hardware License 0.51 (see `LICENSE`) or compatible licenses. Register file code (e.g. `hw/regs/*.sv`) is generated by a fork of lowRISC's [`regtool`](https://github.com/lowRISC/opentitan/blob/master/util/regtool.py) and licensed under Apache 2.0. The USB OHCI controller (`hw/future/UsbOhciAxi4.v`) is generated from the [SpinalHDL](https://github.com/SpinalHDL/SpinalHDL) library licensed under the MIT license. All software sources are licensed under Apache 2.0.

## Publication

If you use Cheshire in your work, you can cite us:

```
@article{ottaviano2023cheshire,
      title   = {Cheshire: A Lightweight, Linux-Capable RISC-V Host
                 Platform for Domain-Specific Accelerator Plug-In},
      author  = {Alessandro Ottaviano and Thomas Benz and
                 Paul Scheffler and Luca Benini},
      journal = {IEEE Transactions on Circuits and Systems II: Express Briefs},
      year    = {2023},
      volume  = {70},
      number  = {10},
      pages   = {3777-3781},
      doi     = {10.1109/TCSII.2023.3289186}
}
```
